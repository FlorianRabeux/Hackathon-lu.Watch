var hanacf = require('../index');

console.log("running DUMMY query against automatically discovered HANA SQL connection.");
hanacf.createConnection(function(error, client)
{
    if(error) {
        console.error("Failed to connect to HANA service: " + error + " \nPlease check the application logs for details.")
        return
    }
    if(client) {
        var sql = 'SELECT CURRENT_USER FROM DUMMY';

        client.prepare(sql, function(err, statement) {
            if(err)
            {
                return console.error("Failed to prepare statement: '" + sql + "' error: " + err);
            }

            statement.exec({},function(err, rows)
            {
                if(err)
                {
                    console.error(err);
                }
                else
                {
                    console.log(JSON.stringify(rows));
                }
            });
        });
    }
});
