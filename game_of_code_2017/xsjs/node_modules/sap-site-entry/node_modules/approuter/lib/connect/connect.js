'use strict';
var connect = require('connect');

var connectUtils = require('./utils');

module.exports = function () {
  var app = connect();
  app._store = {};
  app.set = function (key, value) {
    app._store[key] = value;
  };
  app.get = function (key) {
    return app._store[key];
  };

  app.use(function (req, res, next) {
    connectUtils.setPropertiesToRequest(req, app);
    next();
  });
  return app;
};
