'use strict';

class Routes {

    constructor(appRouter) {
        this.appRouter = appRouter;
    }

    process(routes, destinations) {
        if (routes) {
            console.info("New routes added:", JSON.stringify(routes, null, 4));
            this.appRouter.addRoutes(routes);
        }

        if (destinations) {
            for (let key in destinations) {
                this.appRouter.addDestination(key, destinations[key]);
                console.info("New Destination added:", JSON.stringify(destinations[key], null, 4))
            }
        }
    }

    applyRoutes(siteJson) {
        try {
            console.info("Response from backend: ", siteJson, null, 4);
            //this.process(siteJson.routes, siteJson.destinations);
            delete siteJson.routes;
            delete siteJson.destinations;
        } catch (error) {
            console.error("Error adding dynamic routes", error);
        }
        return siteJson;
    }
}

module.exports = Routes;